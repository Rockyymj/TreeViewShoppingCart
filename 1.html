<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
      <link rel="stylesheet" type="text/css" href="ctree.css" media="screen">
      <title>Assignment 2</title>
      <script>
         window.onload = loadXML;
         var xhttp1=false;
         var xhttp2=false;
         var categoriesArray = new Array();
         var productsArray = new Array();
         
         function loadXML()
         {
               xhttp1 = new XMLHttpRequest();
               xhttp2 = new XMLHttpRequest();
               xhttp1.open("GET","categories.xml",true);
               xhttp1.onreadystatechange = setCategoriesArray
               xhttp2.open("GET","products.xml",true);
               xhttp2.onreadystatechange = setProductsArray
               xhttp1.send(null); 
              xhttp2.send(null);
         }
         
         function setCategoriesArray()
         {
            if (xhttp1.readyState==4) 
            {
               if (xhttp1.status==200 && xhttp1.responseXML)
               {
                  var allStates1 = xhttp1.responseXML.getElementsByTagName("Categories");
         
                  for (var i=0; i<allStates1.length;i++)
                  {
                     categoriesArray [i] = allStates1[i];
         
          }             
               }
              
            }
            
         }
         
         function setProductsArray()
         {
            if (xhttp2.readyState==4) 
            {
               if (xhttp2.status==200 && xhttp2.responseXML)
               {
                  var allStates2 = xhttp2.responseXML.getElementsByTagName("Products")
         
                  for (var i=0; i<allStates2.length;i++)
                  {
                     productsArray[i] = allStates2[i];
            }             
               }
               
            }
            showXML();
         }
         
         
         function showXML(){
            
            str="";
            str += '<ol class="tree">';
            for(i=0;i<categoriesArray.length;i++){
               str += "<li>";
               info = 'Description : '+categoriesArray [i].getElementsByTagName('Description')[0].firstChild.nodeValue;
               str += '<label for="folder1"><b onclick="alert(\'' +info+ '\')">'+categoriesArray [i].getElementsByTagName("CategoryName")[0].firstChild.nodeValue+'</b></label> <input type="checkbox" id="folder1" /> ';
               
               str+='<ol>';
              
               for(j=0;j<productsArray.length;j++){
                  if(categoriesArray [i].getElementsByTagName('CategoryID')[0].firstChild.nodeValue == productsArray [j].getElementsByTagName('CategoryID')[0].firstChild.nodeValue){
                     info = 'Price Per Unit : '+productsArray [j].getElementsByTagName('UnitPrice')[0].firstChild.nodeValue+' \\n';
                     info += ' Quantity Per Unit : '+productsArray [j].getElementsByTagName('QuantityPerUnit')[0].firstChild.nodeValue;
                  str +='<li class="file" onclick="alert(\'' +info+ '\')"><a>'+productsArray [j].getElementsByTagName("ProductName")[0].firstChild.nodeValue+'</a></li>';
                  }
               }
               
               str += "</ol>";
               str += "</li>";
            }  
            
            str += "</ol>";
            
           
            document.getElementById("show").innerHTML = str;
         }
         
         
      </script>
   </head>
   <body>
      <h1 align="center">Product List </h1>
      <table align="center">
         <tr>
            <td>Student Name:Mingjie Yuan</td>
            <td></td>
         </tr>
         <tr>
            <td>Student Number:12446542</td>
            <td></td>
         </tr>
      </table>
      <ol class="tree">
         <div id="show"></div>
      </ol>
            <ol>
         <div>
            <ol>
               <li>
                  <b onclick="alert('Description : Fish Fingers, Hamburger Patties, Shelled Prawns, and Tub Ice Cream')">Frozen Food</b>  
                  <ol>
                     <li onclick="alert('Price Per Unit : 2.55 \n Quantity Per Unit : 500 gram')"><a>Fish Fingers</a></li>
                     <li onclick="alert('Price Per Unit : 5.00 \n Quantity Per Unit : 1000 gram')"><a>Fish Fingers</a></li>
                     <li onclick="alert('Price Per Unit : 2.35 \n Quantity Per Unit : Pack 10')"><a>Hamburger Patties</a></li>
                     <li onclick="alert('Price Per Unit : 6.90 \n Quantity Per Unit : 250 gram')"><a>Shelled Prawns</a></li>
                     <li onclick="alert('Price Per Unit : 1.80 \n Quantity Per Unit : 1 Litre')"><a>Tub Ice Cream</a></li>
                     <li onclick="alert('Price Per Unit : 3.40 \n Quantity Per Unit : 2 Litre')"><a>Tub Ice Cream</a></li>
                  </ol>
               </li>
               <li>
                  <b onclick="alert('Description : Panadol, Bath Soap, Garbage Bags Small, Garbage Bags Large, Washing Powder, and Laundry Bleach')">Home Health</b>  
                  <ol>
                     <li onclick="alert('Price Per Unit : 3.00 \n Quantity Per Unit : Pack 24')"><a>Panadol</a></li>
                     <li onclick="alert('Price Per Unit : 5.50 \n Quantity Per Unit : Bottle 50')"><a>Panadol</a></li>
                     <li onclick="alert('Price Per Unit : 2.60 \n Quantity Per Unit : Pack 6')"><a>Bath Soap</a></li>
                     <li onclick="alert('Price Per Unit : 1.50 \n Quantity Per Unit : Pack 10')"><a>Garbage Bags Small</a></li>
                     <li onclick="alert('Price Per Unit : 5.00 \n Quantity Per Unit : Pack 50')"><a>Garbage Bags Large</a></li>
                     <li onclick="alert('Price Per Unit : 4.00 \n Quantity Per Unit : 1000 gram')"><a>Washing Powder</a></li>
                     <li onclick="alert('Price Per Unit : 3.55 \n Quantity Per Unit : 2 Litre Bottle')"><a>Laundry Bleach</a></li>
                  </ol>
               </li>
               <li>
                  <b onclick="alert('Description : Cheddar Cheese, T\'Bone Steak, Navel Orange, Bananas, Peanches, Grapes and Apples')">Fresh Food</b>  
                  <ol>
                     <li onclick="alert('Price Per Unit : 8.00 \n Quantity Per Unit : 500 gram')"><a>Cheddar Cheese</a></li>
                     <li onclick="alert('Price Per Unit : 15.00 \n Quantity Per Unit : 1000 gram')"><a>Cheddar Cheese</a></li>
                     <li onclick="alert('Price Per Unit : 7.00 \n Quantity Per Unit : 1000 gram')"><a>T'Bone Steak</a></li>
                     <li onclick="alert('Price Per Unit : 3.99 \n Quantity Per Unit : Bag 20')"><a>Navel Orange</a></li>
                     <li onclick="alert('Price Per Unit : 1.49 \n Quantity Per Unit : kilo')"><a>Bananas</a></li>
                     <li onclick="alert('Price Per Unit : 2.99 \n Quantity Per Unit : kilo')"><a>Peaches</a></li>
                     <li onclick="alert('Price Per Unit : 3.50 \n Quantity Per Unit : kilo')"><a>Grapes</a></li>
                     <li onclick="alert('Price Per Unit : 1.99 \n Quantity Per Unit : kilo')"><a>Apples</a></li>
                  </ol>
               </li>
               <li>
                  <b onclick="alert('Description : Earl Grey Tea Bags, Instant Coffee, and Chocolate Bar')">Beverages</b>  
                  <ol>
                     <li onclick="alert('Price Per Unit : 2.49 \n Quantity Per Unit : Pack 25')"><a>Earl Grey Tea Bags</a></li>
                     <li onclick="alert('Price Per Unit : 7.25 \n Quantity Per Unit : Pack 100')"><a>Earl Grey Tea Bags</a></li>
                     <li onclick="alert('Price Per Unit : 13.00 \n Quantity Per Unit : Pack 200')"><a>Earl Grey Tea Bags</a></li>
                     <li onclick="alert('Price Per Unit : 2.89 \n Quantity Per Unit : 200 gram')"><a>Instant Coffee</a></li>
                     <li onclick="alert('Price Per Unit : 5.10 \n Quantity Per Unit : 500 gram')"><a>Instant Coffee</a></li>
                     <li onclick="alert('Price Per Unit : 2.50 \n Quantity Per Unit : 500 gram')"><a>Chocolate Bar </a></li>
                  </ol>
               </li>
               <li>
                  <b onclick="alert('Description : Dry Dog Food, Bird Food, Cat food, and Fish food')">Pet Food</b>  
                  <ol>
                     <li onclick="alert('Price Per Unit : 5.95 \n Quantity Per Unit : 5 kg pack')"><a>Dry Dog Food</a></li>
                     <li onclick="alert('Price Per Unit : 1.95 \n Quantity Per Unit : 1 kg pack')"><a>Dry Dog Food</a></li>
                     <li onclick="alert('Price Per Unit : 3.99 \n Quantity Per Unit : 500g packet')"><a>Bird Food</a></li>
                     <li onclick="alert('Price Per Unit : 2.00 \n Quantity Per Unit : 500g')"><a>Cat Food</a></li>
                     <li onclick="alert('Price Per Unit : 3.00 \n Quantity Per Unit : 500g')"><a>Fish Food</a></li>
                  </ol>
               </li>
            </ol>
         </div>
      </ol>
   </body>
</html>